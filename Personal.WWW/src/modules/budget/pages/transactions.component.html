<app-page title="Transactions" [actions]="actions">
    <ng-template #itemTemplate let-item="item" let-small="small">
        <div style="display: flex; gap: 10px">
            <div [ngStyle]="getItemStyle(item, small)">
                <i style="font-size: 10px" [class]="item.icon"></i>
            </div>
            {{item.name}}
        </div>
    </ng-template>

    <app-filter-panel>
        <div class="grid p-fluid">
            <div class="col">
                <p-dropdown [loading]="categoriesLoading" [options]="categories" [(ngModel)]="selectedCategory"
                    placeholder="Category" optionLabel="name" [showClear]="true">
                    <ng-template let-item pTemplate="item">
                        <ng-container *ngTemplateOutlet="itemTemplate;context:{item, small: false}"></ng-container>
                    </ng-template>
                    <ng-template let-item pTemplate="selectedItem">
                        <ng-container *ngTemplateOutlet="itemTemplate;context:{item, small: true}"></ng-container>
                    </ng-template>
                </p-dropdown>
            </div>
            <div class="col">
                <p-calendar [(ngModel)]="dateFrom" [iconDisplay]="'input'" [showIcon]="true" placeholder="Date from" />
            </div>
            <div class="col">
                <p-calendar [(ngModel)]="dateTo" [iconDisplay]="'input'" [showIcon]="true" placeholder="Date to" />
            </div>
            <div class="col">
                <p-inputNumber [(ngModel)]="minAmount" mode="decimal" placeholder="Min amount"
                    [maxFractionDigits]="2" />
            </div>
            <div class="col">
                <p-inputNumber [(ngModel)]="maxAmount" placeholder="Max amount" mode="decimal"
                    [maxFractionDigits]="2" />
            </div>
        </div>
    </app-filter-panel>

    <div class="mt-3 table">
        <p-table [value]="transactions" [tableStyle]="{ 'min-width': '50rem' }" [paginator]="true" [rows]="5"
            [showCurrentPageReport]="true" [rowsPerPageOptions]="[5, 10, 25, 50]">
            <ng-template pTemplate="header">
                <tr>
                    <th>Date</th>
                    <th>Category</th>
                    <th>Description</th>
                    <th>Amount</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>{{ item.date }}</td>
                    <td>{{ item.categoryName }}</td>
                    <td>{{ item.description }}</td>
                    <td>{{ item.amount }}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</app-page>